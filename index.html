<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Studio Mixer Magic</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    margin:0; padding:0;
    background: linear-gradient(135deg,#1a1a2e,#4b0082);
    color:#fff;
    text-align:center;
    overflow-x:hidden;
  }
  h1 { font-size:2.5rem; margin-top:2rem; text-shadow:2px 2px 5px #000; }
  h2 { margin-top:1.5rem; }

  button {
    font-size:1.3rem;
    padding:1rem 2rem;
    margin:0.7rem;
    cursor:pointer;
    border-radius:12px;
    border:none;
    transition:transform 0.2s, box-shadow 0.2s;
    font-weight:bold;
  }
  button:hover { transform:scale(1.05); box-shadow:0 0 15px #fff; }
  .fortune-btn { background:#ff6f61; color:#fff; }
  .song-btn { background:#ffda61; color:#000; }
  .vibe-btn { background:#61ffda; color:#000; }

  .hidden { display:none; }

  .result-card {
    margin:2rem auto;
    background: rgba(22,36,71,0.9);
    padding:2rem;
    border-radius:16px;
    width:80%;
    max-width:450px;
    box-shadow:0 0 20px #fff;
    font-size:1.2rem;
  }

  #shareCard {
    margin:1rem auto;
    border-radius:12px;
    display:block;
    box-shadow:0 4px 20px rgba(0,0,0,0.6);
  }

  @keyframes twinkle {
    0%,100%{opacity:1;}
    50%{opacity:0.3;}
  }
  .sparkle {
    position:absolute;
    width:4px;height:4px;
    background:#fff;
    border-radius:50%;
    animation:twinkle 2s infinite;
  }
</style>
</head>
<body>

<h1>Studio Mixer Magic âœ¨ðŸŽ§</h1>
<p style="font-size:1.2rem;">Your vibe, your fortune, your theme song for 2026!</p>

<div id="step1">
  <button class="fortune-btn" onclick="chooseMode('fortune')">Give Me My 2026 Fortune ðŸ”®</button>
  <button class="song-btn" onclick="chooseMode('song')">Give Me My 2026 Theme Song ðŸŽµ</button>
</div>

<div id="step2" class="hidden">
  <h2 id="vibePrompt">Pick your vibe</h2>
  <div id="vibeButtons"></div>
</div>

<div id="step3" class="hidden">
  <div class="result-card" id="resultCard"></div>
  <div id="extras" class="hidden">
    <button id="spotifyBtn" class="song-btn hidden" onclick="saveToSpotify()">Save to Spotify ðŸŽµ</button>
    <button id="downloadBtn" class="fortune-btn hidden" onclick="downloadFortune()">Download Magic 8 Ball ðŸ”®</button>
    <button id="shareBtn" class="vibe-btn" onclick="sharePolaroid()">Share Your Vibe Card ðŸ“¸</button>
  </div>
  <canvas id="shareCard" class="hidden"></canvas>
</div>

<!-- Sparkles -->
<script>
for(let i=0;i<50;i++){
  let sparkle=document.createElement('div');
  sparkle.className='sparkle';
  sparkle.style.top=Math.random()*100+'%';
  sparkle.style.left=Math.random()*100+'%';
  sparkle.style.width=2+Math.random()*4+'px';
  sparkle.style.height=2+Math.random()*4+'px';
  sparkle.style.animationDuration=1+Math.random()*3+'s';
  document.body.appendChild(sparkle);
}
</script>

<script>
// DATA
const vibes = [
  {name:"Playful",emoji:"âœ¨"},
  {name:"Fierce",emoji:"ðŸ”¥"},
  {name:"Mysterious",emoji:"ðŸŒ™"},
  {name:"Creative",emoji:"ðŸŽ¨"},
  {name:"Chaos",emoji:"ðŸ¤¡"},
  {name:"Grounded",emoji:"ðŸ§˜"},
  {name:"Wildcard",emoji:"ðŸŽ²"}
];

const fortunes={
  Playful:["Your laughter is your superpower; use it liberally this year.","Unexpected joy will find you in the most curious places."],
  Fierce:["2026 is your year to roar; your boldness opens doors.","Strength comes from confidenceâ€”own every step forward."],
  Mysterious:["Secrets you uncover will spark your creativity.","Embrace the unknown; it holds your next big adventure."],
  Creative:["Your imagination is a magnet for exciting opportunities.","Inspiration strikes when you least expect itâ€”stay ready."],
  Chaos:["A little chaos brings colorful surprises your way.","Trust the whirlwind; it leads to unexpected brilliance."],
  Grounded:["Your calm presence stabilizes those around you.","Focus and patience unlock rewards this year."],
  Wildcard:["Something delightful and unusual will brighten your day.","Expect the unexpected and relish it."]
};

const songs={
  Playful:["Good Times - Chic","Walking on Sunshine - Katrina & The Waves","September - Earth, Wind & Fire"],
  Fierce:["Eye of the Tiger - Survivor","Respect - Aretha Franklin","Barracuda - Heart"],
  Mysterious:["Dreams - Fleetwood Mac","Riders on the Storm - The Doors","Black Magic Woman - Santana"],
  Creative:["Bohemian Rhapsody - Queen","Life on Mars? - David Bowie","Superstition - Stevie Wonder"],
  Chaos:["Sabotage - Beastie Boys","Shake It Out - Florence + The Machine","Crosstown Traffic - Jimi Hendrix"],
  Grounded:["Lovely Day - Bill Withers","Here Comes The Sun - The Beatles","Lean on Me - Bill Withers"],
  Wildcard:["Space Oddity - David Bowie","Starman - David Bowie","Magic Carpet Ride - Steppenwolf"]
};

let mode="", lastResult="", lastVibe="";

// FLOW
function chooseMode(selectedMode){
  mode=selectedMode;
  document.getElementById('step1').classList.add('hidden');
  document.getElementById('step2').classList.remove('hidden');
  const vibeButtonsDiv=document.getElementById('vibeButtons');
  vibeButtonsDiv.innerHTML="";
  vibes.forEach(v=>{
    let btn=document.createElement('button');
    btn.className='vibe-btn';
    btn.textContent=`${v.emoji} ${v.name}`;
    btn.onclick=()=>revealResult(v.name);
    vibeButtonsDiv.appendChild(btn);
  });
  document.getElementById('vibePrompt').textContent=
    mode==='fortune'?"Pick your vibe for a Fortune ðŸ”®":"Pick your vibe for a Theme Song ðŸŽµ";
}

function revealResult(vibe){
  lastVibe=vibe;
  document.getElementById('step2').classList.add('hidden');
  document.getElementById('step3').classList.remove('hidden');
  const resultDiv=document.getElementById('resultCard');
  document.getElementById('extras').classList.remove('hidden');
  if(mode==='fortune'){
    const fortuneList=fortunes[vibe];
    const randomFortune=fortuneList[Math.floor(Math.random()*fortuneList.length)];
    lastResult=randomFortune;
    resultDiv.innerHTML=`<h2>ðŸ”® Your 2026 Fortune</h2><p>${randomFortune}</p>`;
    document.getElementById('downloadBtn').classList.remove('hidden');
    document.getElementById('spotifyBtn').classList.add('hidden');
  }else{
    const songList=songs[vibe];
    const randomSong=songList[Math.floor(Math.random()*songList.length)];
    lastResult=randomSong;
    resultDiv.innerHTML=`<h2>ðŸŽµ Your 2026 Theme Song</h2><p>${randomSong}</p>`;
    document.getElementById('spotifyBtn').classList.remove('hidden');
    document.getElementById('downloadBtn').classList.add('hidden');
  }
}

// EXTRAS
function saveToSpotify(){ window.open(`https://open.spotify.com/search/${encodeURIComponent(lastResult)}`,"_blank"); }

function downloadFortune(){
  const canvas=document.createElement('canvas'); canvas.width=400; canvas.height=200;
  const ctx=canvas.getContext('2d');
  ctx.fillStyle="#162447"; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#FFD700"; ctx.font="20px Arial";
  ctx.fillText("ðŸ”® Your 2026 Fortune",50,50);
  ctx.fillText(lastResult,20,100,360);
  const link=document.createElement('a'); link.download="magic8ball_fortune.png";
  link.href=canvas.toDataURL(); link.click();
}

// OLD CODE â€” DELETE THIS ENTIRE FUNCTION
function sharePolaroid(){
  // ...old plain gradient code
}

// NEW CODE â€” PASTE THE UPGRADED VERSION HERE
function sharePolaroid(){
  const canvas=document.getElementById('shareCard');
  canvas.classList.remove('hidden');
  const ctx=canvas.getContext('2d');
  canvas.width=400; canvas.height=500;

  // --- Background based on vibe ---
  let gradient=ctx.createLinearGradient(0,0,0,canvas.height);
  switch(lastVibe){
    case "Playful": gradient.addColorStop(0,"#ff9a9e"); gradient.addColorStop(1,"#fad0c4"); break;
    case "Fierce": gradient.addColorStop(0,"#ff416c"); gradient.addColorStop(1,"#ff4b2b"); break;
    case "Mysterious": gradient.addColorStop(0,"#2c3e50"); gradient.addColorStop(1,"#4ca1af"); break;
    case "Creative": gradient.addColorStop(0,"#43cea2"); gradient.addColorStop(1,"#185a9d"); break;
    case "Chaos": gradient.addColorStop(0,"#f7971e"); gradient.addColorStop(1,"#ffd200"); break;
    case "Grounded": gradient.addColorStop(0,"#00c6ff"); gradient.addColorStop(1,"#0072ff"); break;
    case "Wildcard": gradient.addColorStop(0,"#fbc2eb"); gradient.addColorStop(1,"#a6c1ee"); break;
    default: gradient.addColorStop(0,"#8e2de2"); gradient.addColorStop(1,"#ff416c");
  }
  ctx.fillStyle=gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // --- Polaroid frame ---
  ctx.strokeStyle="#fff"; ctx.lineWidth=10;
  ctx.strokeRect(10,10,canvas.width-20,canvas.height-20);
  ctx.fillStyle="#fff"; ctx.fillRect(10,canvas.height-60,canvas.width-20,50);

  // --- Sparkles ---
  for(let i=0;i<40;i++){
    ctx.fillStyle="#fff"; 
    const x=Math.random()*canvas.width;
    const y=Math.random()*canvas.height;
    const size=1+Math.random()*3;
    ctx.beginPath(); ctx.arc(x,y,size,0,Math.PI*2); ctx.fill();
  }

  // --- Header ---
  ctx.fillStyle="#fff"; ctx.font="bold 22px Arial"; ctx.textAlign="center";
  ctx.fillText(mode==='fortune'?"ðŸ”® Your 2026 Fortune":"ðŸŽµ Your 2026 Theme Song",canvas.width/2,50);

  // --- Vibe emoji ---
  const vibeIcons={Playful:"âœ¨ðŸŽ‰",Fierce:"ðŸ”¥ðŸ’ª",Mysterious:"ðŸŒ™ðŸ”®",Creative:"ðŸŽ¨ðŸŽ¶",Chaos:"ðŸ¤¡ðŸŽ²",Grounded:"ðŸ§˜ðŸƒ",Wildcard:"ðŸŽ²ðŸŒŸ"};
  const emoji=vibeIcons[lastVibe]||"ðŸŽ²";
  ctx.fillText(emoji,canvas.width/2,80);

  // --- Main text ---
  ctx.fillStyle="#000"; ctx.font="18px Arial";
  wrapText(ctx,lastResult,30,130,canvas.width-60,24);

  // --- Footer branding ---
  ctx.fillStyle="#000"; ctx.font="14px Arial";
  ctx.fillText("Studio de lâ€™Arnet âœ¨ @studio.del.arnet",canvas.width/2,canvas.height-35);
}

// --- Wrap text helper remains unchanged ---
function wrapText(ctx,text,x,y,maxWidth,lineHeight){
  const words=text.split(' '); let line='';
  for(let n=0;n<words.length;n++){
    const testLine=line+words[n]+' ';
    const metrics=ctx.measureText(testLine);
    const testWidth=metrics.width;
    if(testWidth>maxWidth && n>0){
      ctx.fillText(line,x+maxWidth/2,y);
      line=words[n]+' '; y+=lineHeight;
    }else{ line=testLine; }
  }
  ctx.fillText(line,x+maxWidth/2,y);
}


  // Gradient background
  const gradient=ctx.createLinearGradient(0,0,0,canvas.height);
  gradient.addColorStop(0,"#8e2de2"); gradient.addColorStop(0.5,"#ff416c"); gradient.addColorStop(1,"#ffda61");
  ctx.fillStyle=gradient; ctx.fillRect(0,0,canvas.width,canvas.height);

  // Polaroid border
  ctx.strokeStyle="#fff"; ctx.lineWidth=10; ctx.strokeRect(10,10,canvas.width-20,canvas.height-20);

  // Sparkles
  for(let i=0;i<30;i++){
    ctx.fillStyle="#fff"; const x=Math.random()*canvas.width; const y=Math.random()*canvas.height;
    const size=2+Math.random()*3; ctx.beginPath(); ctx.arc(x,y,size,0,Math.PI*2); ctx.fill();
  }

  // Header
  ctx.fillStyle="#fff"; ctx.font="bold 22px Arial"; ctx.textAlign="center";
  ctx.fillText(mode==='fortune'?"ðŸ”® Your 2026 Fortune":"ðŸŽµ Your 2026 Theme Song",canvas.width/2,50);

  // Vibe emoji
  const vibeIcons={Playful:"âœ¨ðŸŽ‰",Fierce:"ðŸ”¥ðŸ’ª",Mysterious:"ðŸŒ™ðŸ”®",Creative:"ðŸŽ¨ðŸŽ¶",Chaos:"ðŸ¤¡ðŸŽ²",Grounded:"ðŸ§˜ðŸƒ",Wildcard:"ðŸŽ²ðŸŒŸ"};
  const emoji=vibeIcons[lastVibe]||"ðŸŽ²";
  ctx.fillText(emoji,canvas.width/2,80);

  // Main text
  ctx.fillStyle="#fff"; ctx.font="18px Arial"; wrapText(ctx,lastResult,30,130,canvas.width-60,24);

  // Footer
  ctx.font="12px Arial"; ctx.fillStyle="#fff"; ctx.fillText("Studio Mixer Magic 2026",canvas.width/2,canvas.height-30);
}

// Wrap text helper
function wrapText(ctx,text,x,y,maxWidth,lineHeight){
  const words=text.split(' '); let line='';
  for(let n=0;n<words.length;n++){
    const testLine=line+words[n]+' '; const metrics=ctx.measureText(testLine); const testWidth=metrics.width;
    if(testWidth>maxWidth && n>0){ ctx.fillText(line,x+maxWidth/2,y); line=words[n]+' '; y+=lineHeight; } else{ line=testLine; }
  }
  ctx.fillText(line,x+maxWidth/2,y);
}
</script>

</body>
</html>
